{"ast":null,"code":"import _slicedToArray from \"/Users/xhzy/Desktop/vikingship/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/xhzy/Desktop/vikingship/src/components/Menu/menu.tsx\";\nimport React, { useState, createContext } from 'react';\nimport classNames from 'classnames';\nexport const MenuContext = createContext({\n  index: '0'\n});\n/**\n * 为网站提供导航功能的菜单。支持横向纵向两种模式，支持下拉菜单。\n * ~~~js\n * import { Menu } from 'vikingship'\n * ~~~\n */\n\nexport const Menu = props => {\n  const className = props.className,\n        mode = props.mode,\n        style = props.style,\n        children = props.children,\n        defaultIndex = props.defaultIndex,\n        onSelect = props.onSelect,\n        defaultOpenSubMenus = props.defaultOpenSubMenus;\n\n  const _useState = useState(defaultIndex),\n        _useState2 = _slicedToArray(_useState, 2),\n        currentActive = _useState2[0],\n        setActive = _useState2[1];\n\n  const classes = classNames('viking-menu', className, {\n    'menu-vertical': mode === 'vertical',\n    'menu-horizontal': mode !== 'vertical'\n  });\n\n  const handleClick = index => {\n    setActive(index);\n\n    if (onSelect) {\n      onSelect(index);\n    }\n  };\n\n  const passedContext = {\n    index: currentActive ? currentActive : '0',\n    onSelect: handleClick,\n    mode,\n    defaultOpenSubMenus\n  };\n\n  const renderChildren = () => {\n    return React.Children.map(children, (child, index) => {\n      const childElement = child;\n      const displayName = childElement.type.displayName;\n\n      if (displayName === 'MenuItem' || displayName === 'SubMenu') {\n        return React.cloneElement(childElement, {\n          index: index.toString()\n        });\n      } else {\n        console.error(\"Warning: Menu has a child which is not a MenuItem component\");\n      }\n    });\n  };\n\n  return React.createElement(\"ul\", {\n    className: classes,\n    style: style,\n    \"data-testid\": \"test-menu\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65\n    },\n    __self: this\n  }, React.createElement(MenuContext.Provider, {\n    value: passedContext,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66\n    },\n    __self: this\n  }, renderChildren()));\n};\nMenu.defaultProps = {\n  defaultIndex: '0',\n  mode: 'horizontal',\n  defaultOpenSubMenus: []\n};\nexport default Menu;","map":{"version":3,"sources":["/Users/xhzy/Desktop/vikingship/src/components/Menu/menu.tsx"],"names":["React","useState","createContext","classNames","MenuContext","index","Menu","props","className","mode","style","children","defaultIndex","onSelect","defaultOpenSubMenus","currentActive","setActive","classes","handleClick","passedContext","renderChildren","Children","map","child","childElement","displayName","type","cloneElement","toString","console","error","defaultProps"],"mappings":";;AAAA,OAAOA,KAAP,IAAoBC,QAApB,EAA8BC,aAA9B,QAAkE,OAAlE;AACA,OAAOC,UAAP,MAAuB,YAAvB;AAuBA,OAAO,MAAMC,WAAW,GAAGF,aAAa,CAAe;AAACG,EAAAA,KAAK,EAAE;AAAR,CAAf,CAAjC;AACP;;;;;;;AAMA,OAAO,MAAMC,IAAmB,GAAIC,KAAD,IAAW;AAAA,QACpCC,SADoC,GAC8CD,KAD9C,CACpCC,SADoC;AAAA,QACzBC,IADyB,GAC8CF,KAD9C,CACzBE,IADyB;AAAA,QACnBC,KADmB,GAC8CH,KAD9C,CACnBG,KADmB;AAAA,QACZC,QADY,GAC8CJ,KAD9C,CACZI,QADY;AAAA,QACFC,YADE,GAC8CL,KAD9C,CACFK,YADE;AAAA,QACYC,QADZ,GAC8CN,KAD9C,CACYM,QADZ;AAAA,QACsBC,mBADtB,GAC8CP,KAD9C,CACsBO,mBADtB;;AAAA,oBAEPb,QAAQ,CAACW,YAAD,CAFD;AAAA;AAAA,QAEpCG,aAFoC;AAAA,QAErBC,SAFqB;;AAG5C,QAAMC,OAAO,GAAGd,UAAU,CAAC,aAAD,EAAgBK,SAAhB,EAA2B;AACnD,qBAAiBC,IAAI,KAAK,UADyB;AAEnD,uBAAmBA,IAAI,KAAK;AAFuB,GAA3B,CAA1B;;AAIA,QAAMS,WAAW,GAAIb,KAAD,IAAmB;AACrCW,IAAAA,SAAS,CAACX,KAAD,CAAT;;AACA,QAAGQ,QAAH,EAAa;AACXA,MAAAA,QAAQ,CAACR,KAAD,CAAR;AACD;AACF,GALD;;AAMA,QAAMc,aAA2B,GAAG;AAClCd,IAAAA,KAAK,EAAEU,aAAa,GAAGA,aAAH,GAAmB,GADL;AAElCF,IAAAA,QAAQ,EAAEK,WAFwB;AAGlCT,IAAAA,IAHkC;AAIlCK,IAAAA;AAJkC,GAApC;;AAMA,QAAMM,cAAc,GAAG,MAAM;AAC3B,WAAOpB,KAAK,CAACqB,QAAN,CAAeC,GAAf,CAAmBX,QAAnB,EAA6B,CAACY,KAAD,EAAQlB,KAAR,KAAkB;AACpD,YAAMmB,YAAY,GAAGD,KAArB;AADoD,YAE5CE,WAF4C,GAE5BD,YAAY,CAACE,IAFe,CAE5CD,WAF4C;;AAGpD,UAAIA,WAAW,KAAK,UAAhB,IAA8BA,WAAW,KAAK,SAAlD,EAA6D;AAC3D,eAAOzB,KAAK,CAAC2B,YAAN,CAAmBH,YAAnB,EAAiC;AACtCnB,UAAAA,KAAK,EAAEA,KAAK,CAACuB,QAAN;AAD+B,SAAjC,CAAP;AAGD,OAJD,MAIO;AACLC,QAAAA,OAAO,CAACC,KAAR,CAAc,6DAAd;AACD;AACF,KAVM,CAAP;AAWD,GAZD;;AAaA,SACE;AAAI,IAAA,SAAS,EAAEb,OAAf;AAAwB,IAAA,KAAK,EAAEP,KAA/B;AAAsC,mBAAY,WAAlD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,WAAD,CAAa,QAAb;AAAsB,IAAA,KAAK,EAAES,aAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGC,cAAc,EADjB,CADF,CADF;AAOD,CAvCM;AAwCPd,IAAI,CAACyB,YAAL,GAAoB;AAClBnB,EAAAA,YAAY,EAAE,GADI;AAElBH,EAAAA,IAAI,EAAE,YAFY;AAGlBK,EAAAA,mBAAmB,EAAE;AAHH,CAApB;AAMA,eAAeR,IAAf","sourcesContent":["import React, { FC, useState, createContext, CSSProperties } from 'react'\nimport classNames from 'classnames'\nimport { MenuItemProps } from './menuItem'\n\ntype MenuMode = 'horizontal' | 'vertical'\nexport interface MenuProps {\n  /**默认 active 的菜单项的索引值 */\n  defaultIndex?: string;\n  className?: string;\n  /**菜单类型 横向或者纵向 */\n  mode?: MenuMode;\n  style?: CSSProperties;\n  /**点击菜单项触发的回掉函数 */\n  onSelect?: (selectedIndex: string) => void;\n  /**设置子菜单的默认打开 只在纵向模式下生效 */\n  defaultOpenSubMenus?: string[];\n}\ninterface IMenuContext {\n  index: string;\n  onSelect?: (selectedIndex: string) => void;\n  mode?: MenuMode;\n  defaultOpenSubMenus?: string[];  \n}\n\nexport const MenuContext = createContext<IMenuContext>({index: '0'})\n/**\n * 为网站提供导航功能的菜单。支持横向纵向两种模式，支持下拉菜单。\n * ~~~js\n * import { Menu } from 'vikingship'\n * ~~~\n */\nexport const Menu: FC<MenuProps> = (props) => {\n  const { className, mode, style, children, defaultIndex, onSelect, defaultOpenSubMenus } = props\n  const [ currentActive, setActive ] = useState(defaultIndex)\n  const classes = classNames('viking-menu', className, {\n    'menu-vertical': mode === 'vertical',\n    'menu-horizontal': mode !== 'vertical',\n  })\n  const handleClick = (index: string) => {\n    setActive(index)\n    if(onSelect) {\n      onSelect(index)\n    }\n  }\n  const passedContext: IMenuContext = {\n    index: currentActive ? currentActive : '0',\n    onSelect: handleClick,\n    mode,\n    defaultOpenSubMenus,\n  }\n  const renderChildren = () => {\n    return React.Children.map(children, (child, index) => {\n      const childElement = child as React.FunctionComponentElement<MenuItemProps>\n      const { displayName } = childElement.type\n      if (displayName === 'MenuItem' || displayName === 'SubMenu') {\n        return React.cloneElement(childElement, {\n          index: index.toString()\n        })\n      } else {\n        console.error(\"Warning: Menu has a child which is not a MenuItem component\")\n      }\n    })\n  }\n  return (\n    <ul className={classes} style={style} data-testid=\"test-menu\">\n      <MenuContext.Provider value={passedContext}>\n        {renderChildren()}\n      </MenuContext.Provider>\n    </ul>\n  )\n}\nMenu.defaultProps = {\n  defaultIndex: '0',\n  mode: 'horizontal',\n  defaultOpenSubMenus: [],\n}\n\nexport default Menu;"]},"metadata":{},"sourceType":"module"}