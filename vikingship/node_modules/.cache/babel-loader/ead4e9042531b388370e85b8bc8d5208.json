{"ast":null,"code":"import _slicedToArray from \"/Users/xhzy/Desktop/vikingship/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/xhzy/Desktop/vikingship/src/components/Menu/subMenu.tsx\";\nimport React, { useContext, useState } from 'react';\nimport classNames from 'classnames';\nimport { MenuContext } from './menu';\nimport Icon from '../Icon/icon';\nimport Transition from '../Transition/transition';\n\nconst SubMenu = ({\n  index,\n  title,\n  children,\n  className\n}) => {\n  const context = useContext(MenuContext);\n  const openedSubMenus = context.defaultOpenSubMenus;\n  const isOpend = index && context.mode === 'vertical' ? openedSubMenus.includes(index) : false;\n\n  const _useState = useState(isOpend),\n        _useState2 = _slicedToArray(_useState, 2),\n        menuOpen = _useState2[0],\n        setOpen = _useState2[1];\n\n  const classes = classNames('menu-item submenu-item', className, {\n    'is-active': context.index === index,\n    'is-opened': menuOpen,\n    'is-vertical': context.mode === 'vertical'\n  });\n\n  const handleClick = e => {\n    e.preventDefault();\n    setOpen(!menuOpen);\n  };\n\n  let timer;\n\n  const handleMouse = (e, toggle) => {\n    clearTimeout(timer);\n    e.preventDefault();\n    timer = setTimeout(() => {\n      setOpen(toggle);\n    }, 300);\n  };\n\n  const clickEvents = context.mode === 'vertical' ? {\n    onClick: handleClick\n  } : {};\n  const hoverEvents = context.mode !== 'vertical' ? {\n    onMouseEnter: e => {\n      handleMouse(e, true);\n    },\n    onMouseLeave: e => {\n      handleMouse(e, false);\n    }\n  } : {};\n\n  const renderChildren = () => {\n    const subMenuClasses = classNames('viking-submenu', {\n      'menu-opened': menuOpen\n    });\n    const childrenComponent = React.Children.map(children, (child, i) => {\n      const childElement = child;\n\n      if (childElement.type.displayName === 'MenuItem') {\n        return React.cloneElement(childElement, {\n          index: \"\".concat(index, \"-\").concat(i)\n        });\n      } else {\n        console.error(\"Warning: SubMenu has a child which is not a MenuItem component\");\n      }\n    });\n    return React.createElement(Transition, {\n      in: menuOpen,\n      timeout: 300,\n      animation: \"zoom-in-top\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57\n      },\n      __self: this\n    }, React.createElement(\"ul\", {\n      className: subMenuClasses,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62\n      },\n      __self: this\n    }, childrenComponent));\n  };\n\n  return React.createElement(\"li\", Object.assign({\n    key: index,\n    className: classes\n  }, hoverEvents, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69\n    },\n    __self: this\n  }), React.createElement(\"div\", Object.assign({\n    className: \"submenu-title\"\n  }, clickEvents, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70\n    },\n    __self: this\n  }), title, React.createElement(Icon, {\n    icon: \"angle-down\",\n    className: \"arrow-icon\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  })), renderChildren());\n};\n\nSubMenu.displayName = 'SubMenu';\nexport default SubMenu;","map":{"version":3,"sources":["/Users/xhzy/Desktop/vikingship/src/components/Menu/subMenu.tsx"],"names":["React","useContext","useState","classNames","MenuContext","Icon","Transition","SubMenu","index","title","children","className","context","openedSubMenus","defaultOpenSubMenus","isOpend","mode","includes","menuOpen","setOpen","classes","handleClick","e","preventDefault","timer","handleMouse","toggle","clearTimeout","setTimeout","clickEvents","onClick","hoverEvents","onMouseEnter","onMouseLeave","renderChildren","subMenuClasses","childrenComponent","Children","map","child","i","childElement","type","displayName","cloneElement","console","error"],"mappings":"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","sourcesContent":["import React,{ useContext, useState, FunctionComponentElement } from 'react'\nimport classNames from 'classnames'\nimport { MenuContext } from './menu'\nimport { MenuItemProps } from './menuItem'\nimport Icon from '../Icon/icon'\nimport Transition from '../Transition/transition'\nexport interface SubMenuProps {\n  index?: string;\n  title: string;\n  className?: string;\n}\n\nconst SubMenu: React.FC<SubMenuProps> = ({ index, title, children, className}) => {\n  const context = useContext(MenuContext)\n  const openedSubMenus = context.defaultOpenSubMenus as Array<string>\n  const isOpend = (index && context.mode === 'vertical') ? openedSubMenus.includes(index) : false\n  const [ menuOpen, setOpen ] = useState(isOpend)\n  const classes = classNames('menu-item submenu-item', className, {\n    'is-active': context.index === index,\n    'is-opened': menuOpen,\n    'is-vertical': context.mode === 'vertical'\n  })\n  const handleClick = (e: React.MouseEvent) => {\n    e.preventDefault()\n    setOpen(!menuOpen)\n  }\n  let timer: any\n  const handleMouse = (e: React.MouseEvent, toggle: boolean) => {\n    clearTimeout(timer)\n    e.preventDefault()\n    timer = setTimeout(() => {\n      setOpen(toggle)\n    }, 300)\n  }\n  const clickEvents = context.mode === 'vertical' ? {\n    onClick: handleClick\n  } : {}\n  const hoverEvents = context.mode !== 'vertical' ? {\n    onMouseEnter: (e: React.MouseEvent) => { handleMouse(e, true)},\n    onMouseLeave: (e: React.MouseEvent) => { handleMouse(e, false)}\n  } : {}\n  const renderChildren = () => {\n    const subMenuClasses = classNames('viking-submenu', {\n      'menu-opened': menuOpen\n    })\n    const childrenComponent = React.Children.map(children, (child, i) => {\n      const childElement = child as FunctionComponentElement<MenuItemProps>\n      if (childElement.type.displayName === 'MenuItem') {\n        return React.cloneElement(childElement, {\n          index: `${index}-${i}`\n        })\n      } else {\n        console.error(\"Warning: SubMenu has a child which is not a MenuItem component\")\n      }\n    })\n    return (\n      <Transition\n        in={menuOpen}\n        timeout={300}\n        animation=\"zoom-in-top\"\n      >\n        <ul className={subMenuClasses}>\n          {childrenComponent}\n        </ul>\n      </Transition>\n    )\n  }\n  return (\n    <li key={index} className={classes} {...hoverEvents}>\n      <div className=\"submenu-title\" {...clickEvents}>\n        {title}\n        <Icon icon=\"angle-down\" className=\"arrow-icon\"/>\n      </div>\n      {renderChildren()}\n    </li>\n  )\n}\n\nSubMenu.displayName = 'SubMenu'\nexport default SubMenu"]},"metadata":{},"sourceType":"module"}